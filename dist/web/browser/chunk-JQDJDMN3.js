import{A,G as z,H as R,I as T,O as j,R as N,S as B,U as L,W as O,b as u,d as h,da as U,e as b,ea as H,f as I,g as w,ga as g,ha as p,i as m,ia as V,j as s,ja as W,k as C,ka as $,l as _,la as Y,m as n,ma as Z,n as i,na as q,o as k,p as S,pa as Q,q as M,qa as G,r as F,ra as x,s as d,t as v,v as a,w as l,y as P,z as D}from"./chunk-7XQF5X2M.js";function tt(o,y){if(o&1){let t=F();n(0,"tr")(1,"td"),a(2),i(),n(3,"td"),a(4),i(),n(5,"td"),a(6),i(),n(7,"td"),a(8),i(),n(9,"td"),a(10),i(),n(11,"td"),a(12),i(),n(13,"td")(14,"button",1),d("click",function(){let e=I(t).$implicit,c=v(2);return w(c.openDialogForAddProduct(e))}),a(15,"edit"),i(),n(16,"button",1),d("click",function(){let e=I(t).$implicit,c=v(2);return w(c.deleteProduct(e))}),a(17,"delete"),i()()()}if(o&2){let t=y.$implicit;m(2),l(t.code),m(2),l(t.categoryName),m(2),l(t.brandName),m(2),l(t.availableQuantity),m(2),l(t.useQuantity),m(2),l(t.quantity)}}function et(o,y){if(o&1&&(S(0),C(1,tt,18,6,"tr",7),M()),o&2){let t=v();m(),_("ngForOf",t.products)}}function ot(o,y){o&1&&(S(0),n(1,"tr")(2,"td",8),a(3,"No records found"),i()(),M())}var J=(()=>{class o{productService;dialog;router;productCategoryService;productBrandService;products=[];totalRecords=0;currentPage=1;pageSize=50;searchString="";userDetails=null;loginUserDetails=null;isNoRecordFound=!1;productCategories=null;productBrands=null;columns=null;pagingParams;constructor(t,r,e,c,f){this.productService=t,this.dialog=r,this.router=e,this.productCategoryService=c,this.productBrandService=f,this.initializePagination()}ngOnInit(){this.loginUserDetails=localStorage.getItem("loginUserDetails"),this.loginUserDetails==null&&this.router.navigateByUrl("/login"),this.fetchUsers(),this.getAllProductCategories(),this.getAllProductBrands()}fetchUsers(){this.productService.getAllProduct(this.pagingParams).subscribe(t=>{this.products=t.data,this.totalRecords=this.products.length,this.totalRecords==0?this.isNoRecordFound=!0:this.isNoRecordFound=!1})}searchUsers(){this.currentPage=1,this.pagingParams.searchString=this.searchString,this.fetchUsers()}changeSortColumn(t){this.pagingParams.sortOrder=="ASC"?this.pagingParams.sortOrder="DESC":this.pagingParams.sortOrder="ASC",this.pagingParams.sortColumn=t,this.fetchUsers()}initializePagination(){this.pagingParams=new G,this.pagingParams.searchString="",this.pagingParams.sortColumn="ID",this.pagingParams.sortOrder="ASC",this.pagingParams.pageNo=1,this.pagingParams.pageSize=10}getAllProductCategories(){this.productCategoryService.getAllProductCategories().subscribe(t=>{this.productCategories=t})}getAllProductBrands(){this.productBrandService.getAllProductBrands().subscribe(t=>{this.productBrands=t})}openDialogForAddProduct(t){this.dialog.open(Q,{data:{tableData:t},width:"500px"}).afterClosed().subscribe(e=>{debugger;e.isClosePopUp||(e.data==null||e.data==null?alert(e.message):(alert("Product added succussdully."),this.refreshPage()))})}openCategoryDialog(){this.columns=["ID","Product Category"],this.dialog.open(x,{data:{columns:this.columns,tableData:this.productCategories,dialogLabel:"Product Categories"},width:"500px"}).afterClosed().subscribe(()=>{this.router.navigateByUrl("/product/list")})}openBrandDialog(){this.columns=["ID","Product Brand"],this.dialog.open(x,{data:{columns:this.columns,tableData:this.productBrands,dialogLabel:"Product Brands"},width:"500px"}).afterClosed().subscribe(()=>{this.router.navigateByUrl("/product/list")})}refreshPage(){window.location.reload()}deleteProduct(t){this.productService.getUserListByProductID(t.id).subscribe(r=>{if(r.data.length>=1){var e=r.data;this.columns=["ID","User"],this.dialog.open(x,{data:{columns:this.columns,tableData:e,dialogLabel:"User List",label:"You can't delete because this product is used for following Users"},width:"500px"}).afterClosed().subscribe(()=>{this.router.navigateByUrl("/product/list")})}else this.productService.deleteProduct(t.id).subscribe(c=>{this.refreshPage()})})}static \u0275fac=function(r){return new(r||o)(s(q),s(W),s(j),s(Y),s(Z))};static \u0275cmp=h({type:o,selectors:[["app-product-list"]],decls:35,vars:3,consts:[[1,"container"],[3,"click"],[1,"search-container"],["type","text","placeholder","Search",3,"ngModelChange","ngModel"],[1,"user-table"],[4,"ngIf"],[1,"button"],[4,"ngFor","ngForOf"],["colspan","7",1,"table-no-record","text-center"]],template:function(r,e){r&1&&(k(0,"app-layout"),n(1,"div",0)(2,"button",1),d("click",function(){return e.openDialogForAddProduct(0)}),a(3,"Add Product"),i(),n(4,"h1"),a(5,"Product List"),i(),n(6,"div",2)(7,"input",3),A("ngModelChange",function(f){return D(e.searchString,f)||(e.searchString=f),f}),i(),n(8,"button",1),d("click",function(){return e.searchUsers()}),a(9,"Search"),i()(),n(10,"table",4)(11,"thead")(12,"tr")(13,"th",1),d("click",function(){return e.changeSortColumn("code")}),a(14,"Product Code"),i(),n(15,"th",1),d("click",function(){return e.changeSortColumn("categoryName")}),a(16,"Category Name"),i(),n(17,"th",1),d("click",function(){return e.changeSortColumn("brandName")}),a(18,"Brand Name"),i(),n(19,"th",1),d("click",function(){return e.changeSortColumn("availableQuantity")}),a(20,"Available Quantity"),i(),n(21,"th",1),d("click",function(){return e.changeSortColumn("useQuantity")}),a(22,"Used Quantity"),i(),n(23,"th",1),d("click",function(){return e.changeSortColumn("quantity")}),a(24,"Total Quantity"),i(),n(25,"th"),a(26,"Action"),i()()(),n(27,"tbody"),C(28,et,2,1,"ng-container",5)(29,ot,4,0,"ng-container",5),i()(),n(30,"div",6)(31,"button",1),d("click",function(){return e.openCategoryDialog()}),a(32,"Product Category"),i(),n(33,"button",1),d("click",function(){return e.openBrandDialog()}),a(34,"Product Brand"),i()()()),r&2&&(m(7),P("ngModel",e.searchString),m(21),_("ngIf",!e.isNoRecordFound),m(),_("ngIf",e.isNoRecordFound))},dependencies:[z,R,g,B,L,O],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}input[_ngcontent-%COMP%]{padding:8px 12px;width:200px;margin-right:10px;border:1px solid #ccc;border-radius:4px}.button[_ngcontent-%COMP%]{border:none;color:#007bff;display:flex;justify-content:flex-end}button[_ngcontent-%COMP%]{padding:8px 20px;border:1px solid #007bff;background-color:#fff;color:#007bff;border-radius:4px;margin:0 5px;cursor:pointer}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;color:#ccc;border-color:#ccc}button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#007bff;color:#fff}.user-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f1f1}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 10px}.pagination[_ngcontent-%COMP%]   .table-no-record[_ngcontent-%COMP%]{text-align:center;padding:20px;font-size:16px;font-weight:700;color:#555}"]})}return o})();var K=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=b({type:o})}static{this.\u0275inj=u({imports:[p,p]})}}return o})();var X=(()=>{class o{static{this.\u0275fac=function(r){return new(r||o)}}static{this.\u0275mod=b({type:o})}static{this.\u0275inj=u({imports:[p,V,p]})}}return o})();var mt=[{path:"list",component:J}],Yt=(()=>{class o{static \u0275fac=function(r){return new(r||o)};static \u0275mod=b({type:o});static \u0275inj=u({imports:[T,N.forChild(mt),g,H,U,g,$,X,K]})}return o})();export{mt as a,Yt as b};
