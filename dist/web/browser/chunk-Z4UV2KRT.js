import{$ as ie,A as G,D as $,E as J,G as E,H as N,I as H,J as M,M as W,O as F,P as Y,R as K,S as w,T as f,U as k,V as Q,W as X,X as Z,Y as ee,Z as te,_ as ne,a as v,aa as re,b as R,c as b,ca as oe,d as U,da as ae,e as j,ea as le,f as P,g as D,ga as I,i as o,j as p,ja as T,k as m,l,m as i,n,o as h,oa as A,p as x,pa as se,q as y,qa as ce,r as O,ra as de,s as g,t as u,u as V,v as a,w as _,x as q,y as B,z}from"./chunk-7XQF5X2M.js";var L=(()=>{class t{http;constructor(e){this.http=e}apiUrl="http://localhost:5062/api/User";login(e){return this.http.post(this.apiUrl+"/GetUserDetailByEmailID",e)}getUserDetails(e){let s={id:e};return this.http.post(`${this.apiUrl}/GetUserDetailByID`,s)}saveUser(e){return this.http.post(`${this.apiUrl}/saveUser`,e)}getAllUser(e){return this.http.post(`${this.apiUrl}/GetAllUserDetails`,e)}DeleteUser(e){let s={id:e.userId,DeletedBy:e.deletedBy};return this.http.post(`${this.apiUrl}/DeleteUser`,s)}static \u0275fac=function(s){return new(s||t)(b(M))};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var pe=(()=>{class t{http;apiUrl="http://localhost:5062/api/City";constructor(e){this.http=e}getAllCities(){return this.http.post(this.apiUrl+"/GetAllCities",null)}static \u0275fac=function(s){return new(s||t)(b(M))};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ge=(()=>{class t{http;apiUrl="//localhost:5062/api/Department";constructor(e){this.http=e}getAllDepartments(){return this.http.post(this.apiUrl+"/GetAllDepartments",null)}static \u0275fac=function(s){return new(s||t)(b(M))};static \u0275prov=v({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Se(t,c){t&1&&(i(0,"div"),a(1,"First Name is required."),n())}function Ue(t,c){t&1&&(i(0,"div"),a(1,"First Name must be more than 2 characters."),n())}function Ee(t,c){t&1&&(i(0,"div"),a(1,"First Name must be less than 100 characters."),n())}function Ne(t,c){if(t&1&&(i(0,"div",14),m(1,Se,2,0,"div",15)(2,Ue,2,0,"div",15)(3,Ee,2,0,"div",15),n()),t&2){let e=u();o(),l("ngIf",e.firstName==null||e.firstName.errors==null?null:e.firstName.errors.required),o(),l("ngIf",e.firstName==null||e.firstName.errors==null?null:e.firstName.errors.minlength),o(),l("ngIf",e.firstName==null||e.firstName.errors==null?null:e.firstName.errors.maxlength)}}function Fe(t,c){t&1&&(i(0,"div"),a(1,"Last Name is required."),n())}function we(t,c){t&1&&(i(0,"div"),a(1,"Last Name must be more than 2 characters."),n())}function ke(t,c){t&1&&(i(0,"div"),a(1,"Last Name must be less than 100 characters."),n())}function Te(t,c){if(t&1&&(i(0,"div",14),m(1,Fe,2,0,"div",15)(2,we,2,0,"div",15)(3,ke,2,0,"div",15),n()),t&2){let e=u();o(),l("ngIf",e.lastName==null||e.lastName.errors==null?null:e.lastName.errors.required),o(),l("ngIf",e.lastName==null||e.lastName.errors==null?null:e.lastName.errors.minlength),o(),l("ngIf",e.lastName==null||e.lastName.errors==null?null:e.lastName.errors.maxlength)}}function Ae(t,c){t&1&&(i(0,"div"),a(1,"Email is required."),n())}function Le(t,c){t&1&&(i(0,"div"),a(1,"Invalid email format."),n())}function Ve(t,c){if(t&1&&(i(0,"div",14),m(1,Ae,2,0,"div",15)(2,Le,2,0,"div",15),n()),t&2){let e=u(2);o(),l("ngIf",e.emailID==null||e.emailID.errors==null?null:e.emailID.errors.required),o(),l("ngIf",e.emailID==null||e.emailID.errors==null?null:e.emailID.errors.email)}}function Re(t,c){if(t&1&&(i(0,"div",3)(1,"label",16),a(2,"Email ID:"),n(),h(3,"input",17),m(4,Ve,3,2,"div",6),n()),t&2){let e=u();o(3),l("readonly",e.isReadOnly),o(),l("ngIf",(e.emailID==null?null:e.emailID.invalid)&&(e.emailID==null?null:e.emailID.touched)&&e.isSubmited)}}function je(t,c){t&1&&(i(0,"div"),a(1,"Password is required."),n())}function qe(t,c){t&1&&(i(0,"div"),a(1,"Password must be at least 6 characters long."),n())}function Be(t,c){if(t&1&&(i(0,"div",14),m(1,je,2,0,"div",15)(2,qe,2,0,"div",15),n()),t&2){let e=u(2);o(),l("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.required),o(),l("ngIf",e.password==null||e.password.errors==null?null:e.password.errors.minlength)}}function ze(t,c){if(t&1&&(i(0,"div",3)(1,"label",18),a(2,"Password:"),n(),h(3,"input",19),m(4,Be,3,2,"div",6),n()),t&2){let e=u();o(3),l("readonly",e.isReadOnly),o(),l("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)&&e.isSubmited)}}function Ge(t,c){if(t&1&&(i(0,"option",24),a(1),n()),t&2){let e=c.$implicit;l("value",e.id),o(),_(e.name)}}function $e(t,c){t&1&&(i(0,"div"),a(1,"City is required."),n())}function Je(t,c){if(t&1&&(i(0,"div",14),m(1,$e,2,0,"div",15),n()),t&2){let e=u(2);o(),l("ngIf",e.cityID==null||e.cityID.errors==null?null:e.cityID.errors.required)}}function He(t,c){if(t&1&&(i(0,"div",3)(1,"label",20),a(2,"City:"),n(),i(3,"select",21)(4,"option",22),a(5,"Select City"),n(),m(6,Ge,2,2,"option",23),n(),m(7,Je,2,1,"div",6),n()),t&2){let e=u();o(4),V("value",null),o(2),l("ngForOf",e.cities),o(),l("ngIf",(e.cityID==null?null:e.cityID.invalid)&&(e.cityID==null?null:e.cityID.touched))}}function We(t,c){if(t&1&&(i(0,"option",24),a(1),n()),t&2){let e=c.$implicit;l("value",e.id),o(),q("",e.name," ")}}function Ye(t,c){t&1&&(i(0,"div"),a(1,"Department is required."),n())}function Ke(t,c){if(t&1&&(i(0,"div",14),m(1,Ye,2,0,"div",15),n()),t&2){let e=u(2);o(),l("ngIf",e.departmentID==null||e.departmentID.errors==null?null:e.departmentID.errors.required)}}function Qe(t,c){if(t&1&&(i(0,"div",3)(1,"label",25),a(2,"Department:"),n(),i(3,"select",26)(4,"option",22),a(5,"Select Department"),n(),m(6,We,2,2,"option",23),n(),m(7,Ke,2,1,"div",6),n()),t&2){let e=u();o(4),V("value",null),o(2),l("ngForOf",e.departments),o(),l("ngIf",(e.departmentID==null?null:e.departmentID.invalid)&&(e.departmentID==null?null:e.departmentID.touched))}}function Xe(t,c){if(t&1){let e=O();i(0,"button",27),g("click",function(){P(e);let r=u();return D(r.OnChangeEdit())}),a(1,"Edit"),n()}}function Ze(t,c){t&1&&(i(0,"button",28),a(1,"Save"),n())}function et(t,c){if(t&1&&(i(0,"tr")(1,"td"),a(2),n(),i(3,"td"),a(4),n()()),t&2){let e=c.$implicit,s=c.index;o(2),_(s+1),o(2),_(e.name)}}function tt(t,c){if(t&1&&(i(0,"div",29)(1,"h2"),a(2,"Products Assigned"),n(),i(3,"table",30)(4,"thead")(5,"tr")(6,"th"),a(7,"#"),n(),i(8,"th"),a(9,"Product Name"),n()()(),i(10,"tbody"),m(11,et,5,2,"tr",31),n()()()),t&2){let e=u();o(11),l("ngForOf",e.userProductDetail)}}function nt(t,c){if(t&1){let e=O();i(0,"tr")(1,"td"),a(2),n(),i(3,"td"),a(4),n(),i(5,"td")(6,"button",33),g("click",function(){let r=P(e).$implicit,d=u(3);return D(d.onDeleteProduct(r.userProductID))}),a(7,"Delete"),n()()()}if(t&2){let e=c.$implicit,s=c.index;o(2),_(s+1),o(2),_(e.name)}}function it(t,c){if(t&1&&(x(0),m(1,nt,8,2,"tr",31),y()),t&2){let e=u(2);o(),l("ngForOf",e.userProductDetail)}}function rt(t,c){t&1&&(x(0),i(1,"tr")(2,"td",34),a(3,"No records found"),n()(),y())}function ot(t,c){if(t&1){let e=O();i(0,"div",29)(1,"h2"),a(2,"Products Assigned"),n(),i(3,"div",10)(4,"button",32),g("click",function(){P(e);let r=u();return D(r.onAddProduct())}),a(5,"Add Product"),n()(),i(6,"table",30)(7,"thead")(8,"tr")(9,"th"),a(10,"#"),n(),i(11,"th"),a(12,"Product Name"),n(),i(13,"th"),a(14,"Action"),n()()(),i(15,"tbody"),m(16,it,2,1,"ng-container",15)(17,rt,4,0,"ng-container",15),n()()()}if(t&2){let e=u();o(16),l("ngIf",e.isProductAssigned),o(),l("ngIf",!e.isProductAssigned)}}var _e=(()=>{class t{userService;cityService;departmentService;fb;_activeRoute;router;dialog;userProductService;cities=null;departments=null;userDetails=null;userForm;loginUserDetails=null;dataForSave=null;isReadOnly=!0;isUpdateForm=!1;isSubmited=!1;labelForAddUser="";labelForEditUser="";userProductDetail=null;isShowProduct=!1;isEditPermition=!1;isProductAssigned=!1;userID=null;constructor(e,s,r,d,C,he,Ce,ve){this.userService=e,this.cityService=s,this.departmentService=r,this.fb=d,this._activeRoute=C,this.router=he,this.dialog=Ce,this.userProductService=ve,this.userForm=this.fb.group({id:[""],firstName:["",[f.required,f.minLength(2),f.maxLength(100)]],lastName:["",[f.required,f.minLength(2),f.maxLength(100)]],emailID:[""],password:[""],cityID:[""],departmentID:[""]})}ngOnInit(){this.userForm.controls.cityID.disable(),this.userForm.controls.departmentID.disable(),this.loginUserDetails=localStorage.getItem("loginUserDetails"),this.loginUserDetails==null&&this.router.navigateByUrl("/login"),this.getAllCity(),this.getAllDepartments(),this.userID=this._activeRoute.snapshot.paramMap.get("id"),this.userID==null?(this.userForm.get("emailID")?.setValidators([f.required]),this.userForm.get("emailID")?.setValidators([f.email]),this.userForm.get("emailID")?.updateValueAndValidity(),this.userForm.get("password")?.setValidators([f.required]),this.userForm.get("password")?.setValidators(f.minLength(6)),this.userForm.get("password")?.updateValueAndValidity(),this.userForm.get("cityID")?.setValidators(null),this.userForm.get("cityID")?.updateValueAndValidity()):(this.getProductListbyUserID(this.userID).then(e=>{e.length!=null&&e.length!=0&&e.length>=1?this.isProductAssigned=!0:this.isProductAssigned=!1}),this.getUserDetails(this.userID).then(e=>{e==null?(this.labelForAddUser="Add User",this.isUpdateForm=!1,this.isShowProduct=!1,this.userForm.get("cityID")?.clearValidators(),this.userForm.get("departmentID")?.clearValidators()):(this.labelForEditUser="Edit User",this.isUpdateForm=!0,this.isShowProduct=!0,JSON.parse(this.loginUserDetails).permissions?this.isEditPermition=!0:this.isEditPermition=!1,this.userForm.get("cityID")?.setValidators([f.required]),this.userForm.get("departmentID")?.setValidators([f.required])),this.userForm.get("cityID")?.updateValueAndValidity(),this.userForm.get("departmentID")?.updateValueAndValidity()}).catch(e=>{console.error("Error loading user details:",e)}))}getAllCity(){this.cityService.getAllCities().subscribe(e=>{this.cities=e})}getAllDepartments(){this.departmentService.getAllDepartments().subscribe(e=>{this.departments=e})}getUserDetails(e){return new Promise((s,r)=>{this.userService.getUserDetails(e).subscribe({next:d=>{this.userDetails=d.data,this.userDetails?(this.userForm.patchValue({id:this.userDetails.id,firstName:this.userDetails.firstName,lastName:this.userDetails.lastName,emailID:this.userDetails.emailID?this.userDetails.emailID:"",password:this.userDetails.password?this.userDetails.password:"",cityID:this.userDetails.cityID?this.userDetails.cityID:"",departmentID:this.userDetails.departmentID?this.userDetails.departmentID:""}),s(this.userDetails)):e==0?(this.userForm.patchValue({id:0,firstName:"",lastName:"",emailID:"",password:"",cityID:null,departmentID:null}),s()):(this.router.navigateByUrl("/userNotFound"),r(new Error("User not found")))},error:d=>{r(d)}})})}onSubmit(){if(this.isSubmited=!0,this.userForm.invalid){this.userForm.markAllAsTouched();return}this.userForm.valid&&(this.dataForSave=this.userForm.value,this.dataForSave.id?this.dataForSave.modifiedBy=JSON.parse(this.loginUserDetails).id:this.dataForSave.createdBy=JSON.parse(this.loginUserDetails).id,this.userService.saveUser(this.dataForSave).subscribe(e=>{this.isUpdateForm?(alert("User updated successfully."),this.refreshPage()):(alert("User added successfully."),this.router.navigateByUrl("/user/list"))}))}refreshPage(){window.location.reload()}OnChangeEdit(){this.isReadOnly=!1,JSON.parse(this.loginUserDetails).permissions?this.userForm.controls.departmentID.enable():this.userForm.controls.departmentID.disable(),this.userForm.controls.cityID.enable()}get firstName(){return this.userForm.get("firstName")}get lastName(){return this.userForm.get("lastName")}get emailID(){return this.userForm.get("emailID")}get password(){return this.userForm.get("password")}get departmentID(){return this.userForm.get("departmentID")}get cityID(){return this.userForm.get("cityID")}getProductListbyUserID(e){return new Promise((s,r)=>{this.userProductService.getProductListbyUserID(e).subscribe({next:d=>{this.userProductDetail=d.data,s(this.userProductDetail)},error:d=>{r(d)}})})}onAddProduct(){var e={userID:this.userID,isAddFromUserDetail:!0};this.dialog.open(se,{data:{tableData:e},width:"500px"}).afterClosed().subscribe(r=>{r.data==null||r.data==null?alert(r.message):alert("Product added successfully."),this.refreshPage()})}onDeleteProduct(e){this.userProductService.deleteUserProduct(e).subscribe(s=>{alert("Product deleted successfully."),this.refreshPage()})}static \u0275fac=function(s){return new(s||t)(p(L),p(pe),p(ge),p(oe),p(W),p(F),p(T),p(A))};static \u0275cmp=U({type:t,selectors:[["app-user-detail"]],decls:25,vars:14,consts:[[1,"container"],[1,"form-container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName","placeholder","Enter your first name",3,"readonly"],["class","error",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName","placeholder","Enter your last name",3,"readonly"],["class","form-group",4,"ngIf"],[1,"button-container"],["type","button",3,"click",4,"ngIf"],["type","submit",4,"ngIf"],["class","table-container",4,"ngIf"],[1,"error"],[4,"ngIf"],["for","email"],["type","email","id","email","formControlName","emailID","placeholder","Enter your email",3,"readonly"],["for","password"],["type","password","id","password","formControlName","password","placeholder","Enter your password",3,"readonly"],["for","city"],["id","city","formControlName","cityID"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["for","department"],["id","department","formControlName","departmentID"],["type","button",3,"click"],["type","submit"],[1,"table-container"],[1,"dynamic-table"],[4,"ngFor","ngForOf"],[1,"add-product-btn",3,"click"],[1,"delete-btn",3,"click"],["colspan","3",1,"table-no-record","text-center"]],template:function(s,r){s&1&&(h(0,"app-layout"),i(1,"div",0)(2,"div",1)(3,"h1"),a(4),n(),i(5,"form",2),g("ngSubmit",function(){return r.onSubmit()}),i(6,"div",3)(7,"label",4),a(8,"First Name:"),n(),h(9,"input",5),m(10,Ne,4,3,"div",6),n(),i(11,"div",3)(12,"label",7),a(13,"Last Name:"),n(),h(14,"input",8),m(15,Te,4,3,"div",6),n(),m(16,Re,5,2,"div",9)(17,ze,5,2,"div",9)(18,He,8,3,"div",9)(19,Qe,8,3,"div",9),i(20,"div",10),m(21,Xe,2,0,"button",11)(22,Ze,2,0,"button",12),n()()(),m(23,tt,12,1,"div",13)(24,ot,18,2,"div",13),n()),s&2&&(o(4),_(r.labelForAddUser?r.labelForAddUser:r.labelForEditUser),o(),l("formGroup",r.userForm),o(4),l("readonly",r.isReadOnly),o(),l("ngIf",(r.firstName==null?null:r.firstName.invalid)&&(r.firstName==null?null:r.firstName.touched)&&r.isSubmited),o(4),l("readonly",r.isReadOnly),o(),l("ngIf",(r.lastName==null?null:r.lastName.invalid)&&(r.lastName==null?null:r.lastName.touched)&&r.isSubmited),o(),l("ngIf",!r.isUpdateForm),o(),l("ngIf",!r.isUpdateForm),o(),l("ngIf",r.isUpdateForm),o(),l("ngIf",r.isUpdateForm),o(2),l("ngIf",r.isReadOnly),o(),l("ngIf",!r.isReadOnly),o(),l("ngIf",r.isShowProduct&&!r.isEditPermition&&r.isProductAssigned),o(),l("ngIf",r.isShowProduct&&r.isEditPermition))},dependencies:[E,N,I,Z,ie,re,w,ne,k,Q,ee,te],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;justify-content:space-between}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{flex:1 1 calc(50% - 1rem);background-color:#f9f9f9;padding:1.5rem;border:1px solid #ddd;border-radius:8px}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:600}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ccc;border-radius:4px}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#d9534f;font-size:.9rem;margin-top:.5rem}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;gap:1rem}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.5rem 1rem;border:none;border-radius:4px;cursor:pointer}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#007bff;color:#fff}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background-color:#f0ad4e}.container[_ngcontent-%COMP%]   .form-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#5cb85c;color:#fff}.container[_ngcontent-%COMP%]   .dynamic-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.container[_ngcontent-%COMP%]   .dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .dynamic-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border:1px solid #ddd;padding:.75rem;text-align:center}.container[_ngcontent-%COMP%]   .dynamic-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:700}.container[_ngcontent-%COMP%]   .dynamic-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.container[_ngcontent-%COMP%]   .dynamic-table[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{background-color:#d9534f;color:#fff;padding:5px 10px;border:none;border-radius:4px;font-size:.9rem;cursor:pointer;transition:background-color .3s}.container[_ngcontent-%COMP%]   .dynamic-table[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]:hover{background-color:#c9302c}.container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]{background-color:#f9f9f9;padding:1.5rem;border:1px solid #ddd;border-radius:8px;width:100%;max-width:800px;margin:0 auto}.container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem;text-align:center;color:#333}.container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-bottom:1rem}.container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .add-product-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;border-radius:5px;padding:.5rem 1rem;font-size:.9rem;cursor:pointer;transition:background-color .3s ease}.container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]   .add-product-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}.container[_ngcontent-%COMP%]   .table-container[_ngcontent-%COMP%]   .table-no-record[_ngcontent-%COMP%]{text-align:center;padding:20px;font-size:16px;font-weight:700;color:#555}"]})}return t})();var at=()=>["/user/detail/",0],lt=t=>["/user/detail/",t];function st(t,c){if(t&1){let e=O();i(0,"tr")(1,"td")(2,"a",8),a(3),n()(),i(4,"td"),a(5),n(),i(6,"td"),a(7),n(),i(8,"td"),a(9),n(),i(10,"td"),a(11),n(),i(12,"td")(13,"button",9),g("click",function(){let r=P(e).$implicit,d=u(2);return D(d.DeleteUser(r.id))}),a(14,"Delete"),n()()()}if(t&2){let e=c.$implicit;o(2),l("routerLink",J(6,lt,e.id)),o(),_(e.userCode),o(2),_(e.firstName),o(2),_(e.lastName),o(2),_(e.cityName),o(2),_(e.departmentName)}}function ct(t,c){if(t&1&&(x(0),m(1,st,15,8,"tr",7),y()),t&2){let e=u();o(),l("ngForOf",e.users)}}function dt(t,c){t&1&&(x(0),i(1,"tr")(2,"td",10),a(3,"No records found"),n()(),y())}var fe=(()=>{class t{userService;userProductService;dialog;router;users=[];totalRecords=0;currentPage=1;pageSize=50;searchString="";userDetails=null;loginUserDetails=null;isNoRecordFound=!1;userProductDetail=null;columns=null;pagingParams;constructor(e,s,r,d){this.userService=e,this.userProductService=s,this.dialog=r,this.router=d,this.initializePagination()}ngOnInit(){this.loginUserDetails=localStorage.getItem("loginUserDetails"),this.loginUserDetails==null&&this.router.navigateByUrl("/login"),this.fetchUsers()}fetchUsers(){this.userService.getAllUser(this.pagingParams).subscribe(e=>{this.users=e.data,this.totalRecords=this.users.length,this.totalRecords==0?this.isNoRecordFound=!0:this.isNoRecordFound=!1})}searchUsers(){this.currentPage=1,this.pagingParams.searchString=this.searchString,this.fetchUsers()}changeSortColumn(e){this.pagingParams.sortOrder=="ASC"?this.pagingParams.sortOrder="DESC":this.pagingParams.sortOrder="ASC",this.pagingParams.sortColumn=e,this.fetchUsers()}initializePagination(){this.pagingParams=new ce,this.pagingParams.searchString="",this.pagingParams.sortColumn="ID",this.pagingParams.sortOrder="ASC",this.pagingParams.pageNo=1,this.pagingParams.pageSize=10}getProductListbyUserID(e){return new Promise((s,r)=>{this.userProductService.getProductListbyUserID(e).subscribe({next:d=>{this.userProductDetail=d.data,s(this.userProductDetail)},error:d=>{r(d)}})})}DeleteUser(e){this.userProductService.getProductListbyUserID(e).subscribe(s=>{if(s.data.length>=1){var r=s.data;this.columns=["ID","Product"],this.dialog.open(de,{data:{columns:this.columns,tableData:r,dialogLabel:"Product List",label:"You can't delete User because User assigned following Products."},width:"500px"}).afterClosed().subscribe(()=>{this.router.navigateByUrl("/user/list")})}else{var d={userId:e,deletedBy:JSON.parse(this.loginUserDetails).id};this.userService.DeleteUser(d).subscribe(C=>{this.refreshPage()})}})}refreshPage(){window.location.reload()}static \u0275fac=function(s){return new(s||t)(p(L),p(A),p(T),p(F))};static \u0275cmp=U({type:t,selectors:[["app-user-list"]],decls:28,vars:5,consts:[[1,"container"],["type","submit",3,"routerLink"],[1,"search-container"],["type","text","placeholder","Search",3,"ngModelChange","ngModel"],[3,"click"],[1,"user-table"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"routerLink"],["type","button",3,"click"],["colspan","6",1,"table-no-record","text-center"]],template:function(s,r){s&1&&(h(0,"app-layout"),i(1,"div",0)(2,"h1"),a(3,"User List"),n(),i(4,"button",1),a(5,"Add User"),n(),i(6,"div",2)(7,"input",3),G("ngModelChange",function(C){return z(r.searchString,C)||(r.searchString=C),C}),n(),i(8,"button",4),g("click",function(){return r.searchUsers()}),a(9,"Search"),n()(),i(10,"table",5)(11,"thead")(12,"tr")(13,"th",4),g("click",function(){return r.changeSortColumn("userCode")}),a(14,"User Code"),n(),i(15,"th",4),g("click",function(){return r.changeSortColumn("FirstName")}),a(16,"First Name"),n(),i(17,"th",4),g("click",function(){return r.changeSortColumn("LastName")}),a(18,"Last Name"),n(),i(19,"th",4),g("click",function(){return r.changeSortColumn("CityName")}),a(20,"City"),n(),i(21,"th",4),g("click",function(){return r.changeSortColumn("DepartmentName")}),a(22,"Department"),n(),i(23,"th"),a(24,"Action"),n()()(),i(25,"tbody"),m(26,ct,2,1,"ng-container",6)(27,dt,4,0,"ng-container",6),n()()()),s&2&&(o(4),l("routerLink",$(4,at)),o(3),B("ngModel",r.searchString),o(19),l("ngIf",!r.isNoRecordFound),o(),l("ngIf",r.isNoRecordFound))},dependencies:[E,N,Y,I,w,k,X],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 0 10px #0000001a}h1[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.search-container[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:20px}input[_ngcontent-%COMP%]{padding:8px 12px;width:200px;margin-right:10px;border:1px solid #ccc;border-radius:4px}button[_ngcontent-%COMP%]{padding:8px 12px;border:none;background-color:#007bff;color:#fff;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.user-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin-bottom:20px}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .user-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.user-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f1f1f1}.pagination[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:8px 16px;border:1px solid #007bff;background-color:#fff;color:#007bff;cursor:pointer;border-radius:4px;margin:0 5px}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:not-allowed;color:#ccc;border-color:#ccc}.pagination[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#007bff;color:#fff}.pagination[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 10px}.pagination[_ngcontent-%COMP%]   .table-no-record[_ngcontent-%COMP%]{text-align:center;padding:20px;font-size:16px;font-weight:700;color:#555}"]})}return t})();var mt=[{path:"detail/:id",component:_e},{path:"list",component:fe}],Ot=(()=>{class t{static \u0275fac=function(s){return new(s||t)};static \u0275mod=j({type:t});static \u0275inj=R({imports:[H,K.forChild(mt),I,le,ae]})}return t})();export{L as a,pe as b,ge as c,mt as d,Ot as e};
